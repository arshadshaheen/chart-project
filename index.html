<!DOCTYPE HTML>
<html>
    <head>
        <title>TradingView Advanced Charts example</title>

        <!-- The script that loads the library -->
        <script
            type="text/javascript"
            src="charting_library_cloned_data/charting_library/charting_library.js"
            onload="console.log('‚úÖ TradingView library script loaded successfully')"
            onerror="console.error('‚ùå Failed to load TradingView library script')">
        </script>

        <!-- Load environment variables from .env file -->
        <script src="load-env.js"></script>
        
        <!-- Fallback: Set API key directly if .env loading fails -->
        <script>
            // This will run after load-env.js
            setTimeout(() => {
                if (!window.env || !window.env.PROVIDER_CONFIG) {
                    console.log('‚ö†Ô∏è No .env file found, using fallback configuration');
                    window.env = {
                        PROVIDER: 'cryptocompare',
                        PROVIDER_CONFIG: {
                            cryptocompare: {
                                apiKey: 'e459128e835fcf1a73fdd58a89bedabf6efcb788838ebc612a613bb5166f8cc1',
                                baseUrl: 'https://min-api.cryptocompare.com/',
                                wsUrl: 'wss://streamer.cryptocompare.com/v2'
                            },
                            mt5: {
                                apiKey: '',
                                baseUrl: '',
                                wsUrl: ''
                            }
                        },
                        TRADINGVIEW_DEFAULT_SYMBOL: 'Bitfinex:BTC/USDT',
                        TRADINGVIEW_DEFAULT_INTERVAL: '1D',
                        DEBUG_MODE: 'true'
                    };
                }
                console.log('üîß Final environment config:', window.env);
            }, 100);
        </script>

        <!-- Custom datafeed module -->
        <script type="module" src="src/core/main.js"></script>
    </head>

    <body style="margin:0px;">
        <!-- A container for the the library widget -->
        <div id="tv_chart_container">
        </div>
    </body>
</html>